<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BreezeMC</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #020d1f;
      font-family: 'Segoe UI', sans-serif;
      color: white;
    }

    canvas#effects {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 1;
    }

    #message-box {
      position: fixed;
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 600px;
      height: 150px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid #00ffff;
      border-radius: 10px;
      overflow-y: auto;
      padding: 10px;
      box-shadow: 0 0 15px #00ffff80;
      z-index: 10000;
    }

    #message-box p {
      margin: 4px 0;
      color: #aefaff;
      font-size: 14px;
    }

    #message-input {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 600px;
      padding: 14px;
      font-size: 16px;
      border: none;
      border-radius: 12px;
      box-shadow: 0 0 20px #00ffff;
      background: #111;
      color: #00ffff;
      outline: none;
      z-index: 10001;
    }

    footer {
      position: fixed;
      bottom: 0;
      right: 0;
      padding: 5px 10px;
      color: #aaa;
      font-size: 14px;
      z-index: 10000;
    }
  </style>
</head>
<body>
  <canvas id="effects"></canvas>

  <div id="message-box"></div>
  <input id="message-input" placeholder="Type a message..." maxlength="30" />

  <footer id="visit-count">üåç Total Visits: 0</footer>

  <script>
    const canvas = document.getElementById('effects');
    const ctx = canvas.getContext('2d');
    let trails = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    document.addEventListener('mousemove', e => {
      trails.push({
        x: e.clientX,
        y: e.clientY,
        alpha: 1,
        life: 0
      });
    });

    function drawTrails() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = trails.length - 1; i >= 0; i--) {
        let t = trails[i];
        t.life += 1;
        t.alpha -= 0.02;
        if (t.alpha <= 0) {
          trails.splice(i, 1);
          continue;
        }
        ctx.strokeStyle = `rgba(255, 255, 255, ${t.alpha})`;
        ctx.beginPath();
        ctx.moveTo(t.x, t.y);
        ctx.lineTo(t.x - 10, t.y - 10);
        ctx.stroke();
      }
    }

    function animate() {
      drawTrails();
      requestAnimationFrame(animate);
    }
    animate();
  </script>

  <script>
    const messageInput = document.getElementById('message-input');
    const messageBox = document.getElementById('message-box');
    const visitCount = document.getElementById('visit-count');

    const MESSAGES_KEY = 'breezemc_messages';
    const VISITS_KEY = 'breezemc_total_visits';
    const LIMIT_KEY = 'breezemc_message_times';

    // Visit count
    let visits = parseInt(localStorage.getItem(VISITS_KEY) || '0');
    visits++;
    localStorage.setItem(VISITS_KEY, visits);
    visitCount.textContent = `üåç Total Visits: ${visits}`;

    // Load messages
    function loadMessages() {
      const raw = JSON.parse(localStorage.getItem(MESSAGES_KEY) || '[]');
      const now = Date.now();
      return raw.filter(m => now - m.time < 12 * 60 * 60 * 1000); // 12 hours
    }

    // Save messages
    function saveMessages(messages) {
      localStorage.setItem(MESSAGES_KEY, JSON.stringify(messages));
    }

    // Display messages
    function showMessages() {
      messageBox.innerHTML = '';
      const messages = loadMessages();
      messages.forEach(m => {
        const p = document.createElement('p');
        p.textContent = m.text;
        messageBox.appendChild(p);
      });
    }

    // Rate limit
    function isRateLimited() {
      const now = Date.now();
      const times = JSON.parse(localStorage.getItem(LIMIT_KEY) || '[]')
        .filter(t => now - t < 60000); // 1 min
      if (times.length >= 5) return true;
      times.push(now);
      localStorage.setItem(LIMIT_KEY, JSON.stringify(times));
      return false;
    }

    // Handle input
    messageInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        const text = messageInput.value.trim();
        if (!text) return;
        if (isRateLimited()) {
          alert('You can only send 5 messages per minute.');
          return;
        }
        const messages = loadMessages();
        messages.push({ text, time: Date.now() });
        saveMessages(messages);
        showMessages();
        messageInput.value = '';
      }
    });

    showMessages();
  </script>
</body>
</html>
